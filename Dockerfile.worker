FROM ruby:2.2.3
MAINTAINER Victor Lellis <vmlellis@gmail.com>

# throw errors if Gemfile has been modified since Gemfile.lock
RUN bundle config --global frozen 1

RUN apt-get update

RUN apt-get install -y nodejs --no-install-recommends

WORKDIR /tmp
ADD Gemfile /tmp/
ADD Gemfile.lock /tmp/
RUN bundle install

ENV APP_HOME /home/app

RUN mkdir -p $APP_HOME
WORKDIR $APP_HOME

COPY . $APP_HOME
